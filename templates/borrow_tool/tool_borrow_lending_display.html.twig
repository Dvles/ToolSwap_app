{% extends "base.html.twig" %}

{% block title %}Mes prêts
{% endblock %}

{% block body %}

<h2>Mes prêts</h2>

{% if borrowTools == null %}
	<p>
		Vous n'avez pas encore prêté d'outils.
	</p>

{% else %}


	<div class="tool-list">
		{% for borrowTool in borrowTools %}
			<div class="tool-item">
				<h3>{{ borrowTool.tool }}
					<span style="font-size: 12px;">| Prêté à
						<a href="{{ path('user_profile', {'user_id': borrowTool.userBorrowerId}) }}">
							<strong>{{ borrowTool.userBorrower }}</strong>
						</a>
					</span>
				</h3>

				{% if borrowTool.days > 1 %}
					<p>
						<strong>Durée:</strong>
						{{ borrowTool.days }}
						jour(s)
					</p>
					<p>
						<strong>Début:</strong>
						{{ borrowTool.start }}</p>
					<strong>Fin:</strong>
					{{ borrowTool.end }}</p>
			{% else %}
				<p></p>
				<p>
					<strong>Durée:</strong>
					{{ borrowTool.days }}
					jour
				</p>
			</p>
			<p>
				<strong>Début:</strong>
				{{ borrowTool.start }}

			{% endif %}
			<p>
				<strong>Statut:</strong>
				{{ borrowTool.status }}
			</p>

			{% if borrowTool.status == "completed" %}
				<button type="button" onclick="location.href='{{ path('lender_reviews_left_display', {user_id: borrowTool.userBorrowerId }) }}'">
					Avis
				</button>
				<button type="button" onclick="location.href='{{ path('lender_review_add', {user_id: borrowTool.userBorrowerId }) }}'">
					commenter
				</button>
			{% endif %}

			<button type="button" onclick="location.href='{{ path('coming_soon') }}'" {% if borrowTool.status == "completed" %} disabled {% endif %}>
				modifier statut
			</button>

			<button type="button" onclick="location.href='{{ path('tool_display_single', {tool_id: borrowTool.toolId }) }}'" {% if borrowTool.isDisabled %} disabled title="L'outil n'est plus disponible" {% endif %}>
				voir outil
			</button>


			<br><br>
			<br><br>
		</div>
	{% endfor %}
</div>{% endif %}{% endblock %}
